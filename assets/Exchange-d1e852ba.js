import{c as se,a as L,r,u as ae,o as le,j as e,O as j,F as re,I as m,P as n,g as _,h as ie,p as te,R as de,S as ne}from"./index-6a7a49be.js";import{D as ce}from"./DevicesCard-4b67b579.js";import{u as oe,S as c}from"./useUpload-c2824fa9.js";const me=se({email:L().required("Email is a required field").email("Email is not valid!"),password:L().min(6,"Password must be at least 6 characters"),brand:L().required("Brand is a required field")}),he=({show:d,handleClose:h,uploadDetails:C,onAddDetails:u,...b})=>{var O,U,q,T,Y,A,W;const[i,f]=r.useState({preview:"",raw:""}),{ram:g,sim:a,memory:N,price:v,setYear:y,setRam:w,setWeight:S,setSim:p,setMemory:x,setCamera:l,setBattery:D,setPrice:$,getData:k,handleBrand:H,handleModel:J,setSelectedModel:V,selectedBrandName:I,data:M,yearsList:E,ramList:z,weightList:F,simList:G,romList:K,cameraList:B,batteryList:R,priceList:Q,models:o,selectedModel:P}=oe(),{formState:{errors:t}}=ae({resolver:le(me)}),X=s=>{s.preventDefault();const ee={brand:I||"",model:P?P.name:"",yearsList:E,ram:g,weightList:F,sim:a,memory:N,cameraList:B,batteryList:R,price:v,image:i};h(),u(ee)},Z=s=>{s.target.files.length&&f({preview:URL.createObjectURL(s.target.files[0]),raw:s.target.files[0]})};return r.useEffect(()=>{window.scrollTo(0,0),k()},[]),r.useEffect(()=>{o&&o.length>0&&V(o[0])},[o]),e.jsx(e.Fragment,{children:e.jsxs(j,{className:"em--modal em--details-canvas",show:d,onHide:h,...b,children:[e.jsx(j.Header,{closeButton:!0,children:e.jsx(j.Title,{children:"Device Information"})}),e.jsx(j.Body,{children:e.jsx("div",{className:"em--details-body",children:e.jsxs(re,{className:"em--form",onSubmit:X,children:[i.preview?e.jsx(e.Fragment,{}):e.jsx("div",{className:"em--upload-image",children:e.jsx(m,{id:"upload_image",label:"Click to upload image or drag and drop",type:"file",className:"em--upload-file",handle:Z,placeholder:n.upload,errorMessage:(O=t.email)==null?void 0:O.message})}),i.preview?e.jsxs("div",{className:"em--image-flex",children:[e.jsxs("span",{className:"em--text",children:[e.jsx("img",{src:i.preview,alt:"dummy"}),e.jsx("p",{children:i.preview})]}),e.jsx("span",{className:"em--close-icon",children:e.jsx(_,{src:ie.CrossIcon,alt:"Cross Icon"})})]}):e.jsx(e.Fragment,{}),e.jsxs("div",{className:"em--grid-2",children:[e.jsx(c,{id:"brand",label:"Brand",type:"brand",valueField:"phonebrandid",onChange:s=>{H(s)},placeholder:n.brand,errorMessage:(U=t.brand)==null?void 0:U.message,list:M&&M.results}),e.jsx(c,{id:"model",label:"Model",type:"model",valueField:"phonemodelid",errorMessage:(q=t.model)==null?void 0:q.message,onChange:s=>J(s),list:o}),e.jsx(m,{id:"year",label:"Year",type:"year",handle:s=>y(s.target.value),placeholder:n.password,errorMessage:(T=t.year)==null?void 0:T.message,value:E,disabled:"disabled"}),e.jsx(c,{id:"ram",label:"Ram",type:"ram",list:z,onChange:s=>w(s.target.value)}),e.jsx(m,{id:"weight",label:"Weight",type:"weight",handle:s=>S(s.target.value),placeholder:n.password,errorMessage:(Y=t.weight)==null?void 0:Y.message,value:F,disabled:"disabled"}),e.jsx(c,{id:"sim",label:"Sim",type:"sim",list:G,onChange:s=>p(s.target.value)}),e.jsx(c,{id:"internalmemory",label:"Internal Memory",type:"internalmemory",list:K,onChange:s=>x(s.target.value)}),e.jsx(m,{id:"camera",label:"Camera",type:"camera",handle:s=>l(s.target.value),placeholder:n.password,errorMessage:(A=t.camera)==null?void 0:A.message,value:B,disabled:"disabled"}),e.jsx(m,{id:"battery",label:"Battery",type:"battery",handle:s=>D(s.target.value),placeholder:n.password,errorMessage:(W=t.battery)==null?void 0:W.message,value:R,disabled:"disabled"}),e.jsx(c,{id:"price",label:"Launching Price",type:"price",list:Q,onChange:s=>$(s.target.value)})]}),e.jsx("button",{type:"submit",className:"em--primary-button btn",children:"Submit"})]})})})]})})},je=()=>{var p,x;const[d,h]=r.useState(null),[C,u]=r.useState(!0),[b,i]=r.useState(!1),f=()=>i(!1),g=()=>i(!0),[a,N]=r.useState(()=>{const l=localStorage.getItem("uploadDetail");return JSON.parse(l)}),v=l=>{N(l)};r.useEffect(()=>{localStorage.setItem("uploadDetail",JSON.stringify(a))},[a]),r.useEffect(()=>{window.scrollTo(0,0)},[]),r.useEffect(()=>{window.scrollTo(0,0),y()},[]);const y=async()=>{try{const l=await te();h(l.data)}catch(l){console.error("Error fetching data:",l)}finally{u(!1)}},w="https://dummyimage.com/600x400/000/fff",S=l=>{l.target.src=w};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"em--section em--exchange-section",children:e.jsxs(de,{className:"device__section",children:[e.jsx("h4",{className:"em--xlarge-head",children:"Exchange."}),a?null:e.jsx(e.Fragment,{children:e.jsx("div",{className:"em--upload-info mb-5",children:e.jsx("button",{className:"em--upload-button",onClick:g,children:"Please upload your device details"})})}),["end"].map((l,D)=>e.jsx(he,{show:b,placement:l,name:l,onAddDetails:v,onClose:g,handleClose:f},D)),a?e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Your device details"}),e.jsx("div",{className:"em--card em--card-details",children:e.jsxs("div",{className:"em--details-info",children:[e.jsx("div",{className:"em--details-image",children:e.jsx(_,{src:(p=a.image)==null?void 0:p.preview,className:"em--image",onError:S,alt:`Image of ${a.brand}`})}),e.jsx("div",{className:"em--details-information",children:e.jsxs("ul",{className:"em--details-list",children:[e.jsxs("li",{children:[e.jsx("span",{className:"bold",children:"Brand"}),e.jsx("span",{className:"light",children:a.brand})]}),e.jsxs("li",{children:[e.jsx("span",{className:"bold",children:"Model"}),e.jsx("span",{className:"light",children:a.model})]}),e.jsxs("li",{children:[e.jsx("span",{className:"bold",children:"Year"}),e.jsx("span",{className:"light",children:a.yearsList})]}),e.jsxs("li",{children:[e.jsx("span",{className:"bold",children:"Ram"}),e.jsx("span",{className:"light",children:a.ram})]}),e.jsxs("li",{children:[e.jsx("span",{className:"bold",children:"Weight"}),e.jsx("span",{className:"light",children:a.weightList})]}),e.jsxs("li",{children:[e.jsx("span",{className:"bold",children:"Sim"}),e.jsx("span",{className:"light",children:a.sim})]}),e.jsxs("li",{children:[e.jsx("span",{className:"bold",children:"Internal Memory"}),e.jsx("span",{className:"light",children:a.memory})]}),e.jsxs("li",{children:[e.jsx("span",{className:"bold",children:"Camera"}),e.jsx("span",{className:"light",children:a.cameraList})]}),e.jsxs("li",{children:[e.jsx("span",{className:"bold",children:"Battery"}),e.jsx("span",{className:"light",children:a.batteryList})]}),e.jsxs("li",{children:[e.jsx("span",{className:"bold",children:"Price"}),e.jsx("span",{className:"light",children:a.price})]})]})})]})})]}):null,a?e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Exchange Device"}),C?e.jsx(ne,{}):d&&d.results&&((x=d.results)!=null&&x.length)?d.results.map(ce):"No Found"]}):null]})})})};export{je as default};